# -------------------------
# For every user
# -------------------------
# On every editor
# ---------------------------
'atom-workspace.has-narrow atom-text-editor':
  'ctrl-g': 'narrow:close'
  'ctrl-cmd-f': 'narrow:focus'
  'ctrl-cmd-p': 'narrow:previous-item'
  'ctrl-cmd-n': 'narrow:next-item'

# Only on narrow-editor
# ---------------------------
'atom-text-editor.narrow.narrow-editor[data-grammar="source narrow"]':
  'enter': 'core:confirm'
  'tab': 'narrow-ui:move-to-prompt-or-selected-item'
  'f5': 'narrow-ui:refresh-force'
  'ctrl-l': 'narrow-ui:refresh-force'

'atom-text-editor.narrow.narrow-editor[data-grammar="source narrow"]:not(.insert-mode)':
  'ctrl-r': 'narrow-ui:toggle-auto-preview'

# narrow-editor.fold
# -------------------------
'atom-text-editor.narrow.narrow-editor.fold[data-grammar="source narrow"]':
  'cmd-]': 'narrow-ui:fold:increase-fold-level'
  'cmd-[': 'narrow-ui:fold:decrease-fold-level'

# -------------------------
# Vim-mode-plus user only
# -------------------------
# narrow-editor.normal-mode
# ---------------------------
'atom-text-editor.narrow.narrow-editor.vim-mode-plus.normal-mode[data-grammar="source narrow"]':
  'enter': 'core:confirm'
  'q': 'core:close'
  'o': 'narrow-ui:confirm-keep-open'
  'r': 'narrow-ui:toggle-auto-preview'
  'i': 'narrow-ui:move-to-prompt'
  'a': 'narrow-ui:move-to-prompt'
  'I': 'vim-mode-plus:activate-insert-mode'

# Invoke narrow command from vim-mode-plus's search-mini-editor
# ---------------------------
'atom-text-editor.vim-mode-plus-search':
  'ctrl-l': 'vim-mode-plus-user:narrow:lines'
  'cmd-/': 'vim-mode-plus-user:narrow:search'
  'ctrl-cmd-/': 'vim-mode-plus-user:narrow:search-current-project'
